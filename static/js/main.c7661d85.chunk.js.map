{"version":3,"sources":["services/pixabay-api.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Modal/Modal.jsx","App.js","index.js"],"names":["searchQuery","currentPage","axios","get","then","response","data","hits","Searchbar","state","query","handleChange","event","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","className","this","type","onChange","Component","ImageGalleryItem","url","alt","onClick","src","ImageGallery","pics","map","id","webformatURL","largeImageURL","tags","modalRoot","document","getElementById","Modal","handleKeydown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","App","error","showModal","largeImg","largeImgTags","isLoading","fetchLength","onChangeQuery","fetchPics","options","api","prevState","length","catch","finally","onPicClick","pic","toggleModal","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","shouldRenderLoadMoreButton","color","style","textAlign","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.c7661d85.chunk.js","sourcesContent":["/* eslint-disable import/no-anonymous-default-export */\nimport axios from 'axios';\n\nconst API_KEY = '20542752-0490219c09a6da4a08c0fa17e';\n\nconst fetchPics = ({ searchQuery = '', currentPage = 1 }) => {\n  return axios\n    .get(\n      `https://pixabay.com/api/?key=${API_KEY}&q=${searchQuery}&page=${currentPage}&orientation=horizontal&per_page=12&image_type=photo`,\n    )\n    .then(response => response.data.hits);\n};\n\nexport default { fetchPics };\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n\tstate = { query: '' };\n\n\thandleChange = event => {\n\t\tthis.setState({ query: event.currentTarget.value });\n\t};\n\n\thandleSubmit = event => {\n\t\tevent.preventDefault();\n\t\tthis.props.onSubmit(this.state.query);\n\t\tthis.setState({ query: '' });\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<header className='Searchbar'>\n\t\t\t\t<form className='SearchForm' onSubmit = {this.handleSubmit}>\n\t\t\t\t\t<button type='submit' className='SearchForm-button'></button>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='text' className='SearchForm-input'\n\t\t\t\t\t\tvalue={this.state.query}\n\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t/>\n\t\t\t\t</form>\n\t\t\t</header>)\n\t}\n}\n\nSearchbar.propTypes = {\n\tonSubmit: PropTypes.func.isRequired,\n};\n \nexport default Searchbar;","import PropTypes from 'prop-types';\n\nconst ImageGalleryItem = ({ url, alt, onClick }) => (\n\t<>\n\t\t<img\n\t\t\tsrc={url}\n\t\t\talt={alt}\n\t\t\tonClick={onClick} className=\"ImageGalleryItem-image\"\n\t\t/>\n\t</>\n);\n\nImageGalleryItem.propTypes = {\n\turl: PropTypes.string.isRequired,\n\talt: PropTypes.string.isRequired,\n\tonClick: PropTypes.func.isRequired,\n}\n \nexport default ImageGalleryItem;","import PropTypes from 'prop-types';\n\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nconst ImageGallery = ({pics, onClick}) => (\n\t<ul className=\"ImageGallery\">\n\t\t{pics.map(({ id, webformatURL, largeImageURL, tags }) => (\n\t\t\t<li className=\"ImageGalleryItem\" key={id}>\n\t\t\t\t<ImageGalleryItem\n\t\t\t\t\turl={webformatURL}\n\t\t\t\t\talt={tags}\n\t\t\t\t\tonClick={()=>onClick(largeImageURL, tags)}\n\t\t\t\t/>\n\t\t\t</li>\n\t\t))}\n\t</ul>\n)\n\nImageGallery.propTypes = {\n\tpics: PropTypes.arrayOf(PropTypes.shape({\n\t\tid: PropTypes.number.isRequired,\n\t})),\n\tonClick: PropTypes.func.isRequired,\n}\n \nexport default ImageGallery;","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\n\nconst modalRoot = document.getElementById('modal-root');\n\nclass Modal extends Component {\n\t\n\tcomponentDidMount() {\n\t\twindow.addEventListener('keydown', this.handleKeydown);\n\t};\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('keydown', this.handleKeydown);\n\t};\n\t\n\thandleKeydown = event => {\n\t\tif (event.code === 'Escape') {\n\t\t\tthis.props.onClose();\n\t\t};\n\t};\n\n\thandleBackdropClick = event => {\n\t\tif (event.currentTarget === event.target) {\n\t\t\tthis.props.onClose()\n\t\t};\n\t};\n\n\trender() {\n\t\tconst { url, alt} = this.props\n\t\treturn createPortal(\n\t\t\t<div className=\"Overlay\" onClick={ this.handleBackdropClick}>\n  \t\t\t<div className=\"Modal\">\n\t\t\t\t\t<img src={url} alt={alt} />\n \t\t\t\t</div>\n\t\t\t</div>, modalRoot\n\t\t);\n\t}\n};\n\nModal.propTypes = {\n\turl: PropTypes.string.isRequired,\n\talt: PropTypes.string.isRequired,\n\tonClose: PropTypes.func.isRequired,\n}\n \nexport default Modal;","import React, { Component } from 'react';\nimport api from './services/pixabay-api';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Modal from './components/Modal';\nimport Loader from 'react-loader-spinner';\n\nclass App extends Component {\n  state = {\n    pics: [],\n    searchQuery: '',\n    currentPage: 1,\n    error: null,\n    showModal: false,\n    largeImg: '',\n    largeImgTags: '',\n    isLoading: false,\n    fetchLength: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchPics();\n    }\n\n    if (this.state.currentPage > 2) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  onChangeQuery = query => {\n    this.setState({\n      searchQuery: query,\n      currentPage: 1,\n      pics: [],\n      fetchLength: '',\n    });\n  };\n\n  fetchPics = () => {\n    const { searchQuery, currentPage } = this.state;\n    const options = { searchQuery, currentPage };\n\n    this.setState({ isLoading: true });\n\n    api\n      .fetchPics(options)\n      .then(pics => {\n        this.setState(prevState => ({\n          pics: [...prevState.pics, ...pics],\n          currentPage: prevState.currentPage + 1,\n          fetchLength: pics.length,\n        }));\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  };\n\n  onPicClick = (pic, tags) => {\n    this.setState({ showModal: true, largeImg: pic, largeImgTags: tags });\n  };\n\n  toggleModal = () => {\n    this.setState(prevState => ({ showModal: !prevState.showModal }));\n  };\n\n  render() {\n    const {\n      pics,\n      largeImg,\n      largeImgTags,\n      showModal,\n      isLoading,\n      error,\n      fetchLength,\n    } = this.state;\n    const shouldRenderLoadMoreButton =\n      pics.length > 0 && fetchLength === 12 && !isLoading;\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.onChangeQuery} />\n\n        <ImageGallery pics={pics} onClick={this.onPicClick} />\n\n        {isLoading && (\n          <Loader className=\"Loader\" color=\"#3f51b5\" type=\"ThreeDots\" />\n        )}\n        {shouldRenderLoadMoreButton && (\n          <button type=\"button\" className=\"Button\" onClick={this.fetchPics}>\n            Load more\n          </button>\n        )}\n\n        {error && (\n          <p style={{ textAlign: 'center' }}>\n            Something went wrong. Please try again.\n          </p>\n        )}\n\n        {showModal && (\n          <Modal url={largeImg} alt={largeImgTags} onClose={this.toggleModal} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}